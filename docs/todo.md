# TaiyaqバックエンドのTODOリスト

このドキュメントは、`taiyaq`バックエンドにおける残りのタスクと改善点を示します。

## 高優先度

- **実際の通知送信ロジックの実装**: `src/data.rs`の`send_notification`メソッドは現在プレースホルダーです。LINE、Emailを介して通知を送信する実際のロジックを実装してください。
- **LINE Botメッセージ解析の強化**: `src/api/handler.rs`の`line_callback`関数を改善し、ユーザーメッセージを堅牢に解析して以下に対応できるようにしてください。
  - ステータス照会用の注文ID。
  - 通知設定用のメールアドレスまたはLINEユーザーID。
  - 様々なユーザー入力に対応し、役立つ応答を提供する。
- **`estimatedWaitMinutes`計算の改善**: `get_order_details`の現在の推定は簡略化されています。現在の待機中の注文数、生産能力などの要因に基づいた、より洗練されたアルゴリズムを実装してください。

## 中優先度

- **「cooking」ステータス遷移の実装**: 現在、注文は「waiting」から「ready」に直接遷移します。注文を明示的に「cooking」ステータスに設定するメカニズム（例: スタッフAPIエンドポイントまたは自動ロジック）を導入してください。

## 低優先度

- **エラー処理とバリデーション**: すべてのAPIエンドポイントでエラー処理と入力バリデーションを強化してください。
- **認証と認可**: スタッフAPIとボットAPIに認証を追加し、すべてのエンドポイントに認可チェックを追加してください。
